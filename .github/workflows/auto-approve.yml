name: Auto Approve

# Bot auto-approves PRs from the repo owner after CI passes.
# Uses AlexGromer-Claude-Code-Bot GitHub App credentials.

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  auto-approve:
    name: Auto Approve (owner PR)
    runs-on: ubuntu-latest
    # Only approve PRs from the repo owner
    if: github.actor == 'AlexGromer'

    steps:
    - name: Generate bot token
      id: bot-token
      uses: actions/create-github-app-token@v1
      with:
        app-id: ${{ secrets.APP_ID }}
        private-key: ${{ secrets.APP_PRIVATE_KEY }}

    - name: Auto approve PR
      uses: hmarr/auto-approve-action@v4
      with:
        github-token: ${{ steps.bot-token.outputs.token }}
        review-message: "Auto-approved by AlexGromer-Claude-Code-Bot: owner PR, CI checks required."
